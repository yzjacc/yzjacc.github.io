---
layout: post
title: "「Progress」输入URL后发生了什么 "
subtitle: " From Yuzj"
author: "Yuzj"
header-img: "img/post-bg-web.jpg"
header-mask: 0.3
catalog: true
tags:
- A Little Progress
- 网络
---

### 今日讨论

**输入url后发生了什么**

#### 结果

作为前端开发，我们想要知道输入url后发生了什么，首先要知道URL是什么，由什么组成?
协议名+域名+端口号+路径+查询字符串+片段标识符
其次再必须对http请求以及浏览器的渲染过程有一定的了解，那么在浏览器中输入urI后发生了什么:
检查浏览器是否有缓存或缓存是否过期
解析DNS，建立IP链接
建立TCP链接
*发起HTTP请求
收到服务器端响应
浏览器解析数据
关闭TCP链接

##### 1、解析DNS

在解析DNS的过程中，首先检测系统缓存，如果没有或已过期，则会根据域名从顶级、- -级. .开始查找，直到找到对应的服务器，然后建立IP链接

##### 2、建立TCP链接

建立TCP链接，就是通常说的三次握手，首先是客户端向服务器发送请求是否可以建立链接，服务器返回同意后，客户端回馈服务器:的响应，即完成3次通话。

##### 3、发送HTTP请求

在完成3次握手后，由客户端向服务器端发送http请求，http请 求内容包括:
请求行:方法+地址+http版本
请求头
请求体

##### 4、服务器处理请求饼返回http报文

服务器端接到http请求后在会作出响应，响应内容包括:
响应行: http版本+状态码+状态描述
响应头
响应体
其中响应的状态码包括:
200成功
300重定向
400客户端错误
500服务器端错误

##### 5、浏览器渲染

在客户端还没有完全接收完到服务器端的响应内容后，便已经开始在浏览器中渲染页面了，渲染过程包括: 
解析DOM Tree
解析CSS Tree 
把DOM+CSS Tree布局绘制到屏幕
在布局中有两个概念:重排和重绘，这两个动作如果频繁的话会非常影响页面性能，所以我们尽量避免以下会引起重排和重绘的操作:增删改DOM、移动DOM位置、修改DOM内容、修改CSS、resize窗口、修改网页默认字体、获取某些属性: width、 offset-Top
解析JS
在解析html时，遇到js代码 会停止解析html进行js解析，但是在js执行前必须保证css文件已经加载完
js执行都是单线程的，因为他的用途决定了他就是个单线程，那么的异步操作是怎么来的呢?
js执行时分同步任务和异步任务，在主线程执行同步任务，称其为执行栈。开启浏览器其他线程执行异步任务，称其为任务队列。js执行时先依次执行执行栈，完成后再从任务队列中提取事件，进行回调执行。

##### 6、关闭TCP链接